
 const megaArray = [

                   [
                    ["Já jsem ", "I am ",[["doma", "at home"], ["ve škole", "at school"] ]],
                    ["Ty jsi ", "You are ",[["v práci", "at work"], ["v autobusu", "on the bus"] ]],
                    ["On je ", "He is ",[["v autě", "in the car"], ["v restauraci", "in a restaurant"] ]],
                    ["Ona je ", "She is ",[["v nemocnici", "in the hospital"], ["v kavárně", "in a café"] ]],
                    ["My jsme ", "We are ",[["v kanceláři", "in an office"], ["v kavárně", "in a café"] ]],
                    ["Vy jste ", "(pl.) You are ",[["v autě", "in the car"], ["v autobusu", "on the bus"] ]],
                    ["Oni jsou ", "They are ",[["v práci", "at work"], ["ve škole", "at school"] ]],
                    ["Já jsem ", "I am ", [["Čech", "Czech"], ["učitel", "a teacher"] ]],
                    ["Ty jsi ", "You are ", [["z USA", "from USA"], ["student", "student"] ]],
                    ["On je ", "He is ", [["velký", "big"], ["malý", "small"] ]],
                    ["Ona je ", "She is ", [["v práci", "at work"], ["ve škole", "at school"] ]],
                    ["My jsme ", "We are ", [["v nemocnici", "in the hospital"], ["v kavárně", "in a café"] ]],
                    ["Vy jste ", "(pl.) You are ", [["doma", "at home"], ["ve škole", "at school"] ]],
                    ["Oni jsou ", "They are ", [["z USA", "from USA"], ["v kavárně", "in a café"] ]],
                    ],


                 [
                ["Já beru ", "I take ",[["peníze", "money"], ["noviny", "newspaper"] ]],
                ["Ty bereš ", "You take ",[["peníze", "money"], ["noviny", "a newspaper"] ]],
                ["On bere ", "He takes ",[["peníze", "money"], ["noviny", "a newspaper"] ]],
                ["My bereme ", "We take ",[["peníze", "money"], ["noviny", "newspaper"] ]],
                ["Vy berete ", "(pl.) You take ",[["peníze", "money"], ["noviny", "newspaper"] ]],
                ["Oni berou ", "They take ",[["peníze", "money"], ["noviny", "newspaper"] ]],

                ["Já čtu ", "I read ",[["knihu", "book"], ["noviny", "newspaper"] ]],
                ["Ty čteš ", "You read ",[["knihu", "book"], ["noviny", "newspaper"] ]],
                ["On čte ", "He reads ",[["knihu", "book"], ["noviny", "newspaper"] ]],
                ["Ona čte ", "She reads ",[["knihu", "book"], ["noviny", "newspaper"] ]],
                ["My čteme ", "We read ",[["knihu", "book"], ["noviny", "newspaper"] ]],
                ["Vy čtete ", "(pl.) You read ",[["knihu", "book"], ["noviny", "newspaper"] ]],
                ["Oni čtou ", "They read ",[["knihu", "book"], ["noviny", "newspaper"] ]],

                ["Já peču ", "I bake ",[["chleba", "bread"], ["dort", "a cake"] ]],
                ["Ty pečeš ", "You bake ",[["chleba", "bread"], ["dort", "a cake"] ]],
                ["On peče ", "He bakes ",[["chleba", "bread"], ["dort", "a cake"] ]],
                ["Ona peče ", "She bakes ",[["chleba", "bread"], ["dort", "a cake"] ]],
                ["My pečeme ", "We bake ",[["chleba", "bread"], ["dort", "a cake"] ]],
                ["Vy pečete ", "(pl.) You bake ",[["chleba", "bread"], ["dort", "a cake"] ]],
                ["Oni pečou ", "They bake ",[["chleba", "bread"], ["dort", "a cake"] ]],
                                                                                        ],

                 [
                ["Já mám ", "I have ",[["knihu", "a book"], ["kočku", "a cat"] ]],
                ["Ty vidíš ", "You see ",[["školu", "a school"], ["kamaráda", "a friend"] ]],
                ["On chce ", "He wants ",[["telefon", "a phone"], ["růži", "a rose"] ]],
                ["Ona jí ", "She eats ",[["jablko", "an apple"], ["chleba", "a bread"] ]],
                ["My pijeme ", "We drink ",[["pivo", "beer"], ["vodu", "water"] ]],


                ["Já pomáhám ", "I help ",[["mamince", "mum"], ["tátovi", "dad"] ]],
                ["Ty telefonuješ ", "You phone ",[["kamarádovi", "a friend"], ["dítěti", "a child"] ]],
                ["On přijde k ", "He comes to ",[["učiteli", "the teacher"], ["doktorovi", "the doctor"] ]],
                ["Vy lžete ", "(pl.) You lie to ",[["právníkovi", "a lawyer"], ["prodavačovi", "a shop assistant"] ]],
                ["Oni věří ", "They believe/trust ",[["pilotovi", "the pilot"], ["kuchaři", "the cook"] ]],
                ["Já platím ", "I pay ",[["opraváři", "the mechanic"], ["zubaři", "the dentist"] ]],


                ["Já dám řediteli ", "I give the director ",[["pero", "a pen"], ["knihu", "a book"] ]],
                ["Ty kupuješ přítelkyni ", "You buy the girlfriend ",[["počítač", "a computer"], ["růži", "a rose"] ]],
                ["On vaří tátovi ", "He cooks ",[["večeři", "dinner for dad"], ["snídani", "breakfast for dad"] ]],
                ["Ona posílá babičce ", "She sends grandma ",[["zprávu", "a message"], ["dopis", "a letter"] ]],
                ["On nabízí kamarádovi ", "He offers a friend ",[["práci", "job"], ["příležitost", "opportunity"] ]],
                                                                                        ],


                [
                ["Minulé léto jsem ", "Last summer, I (masc.) ",[["jel do Německa", "went to Germany"], ["viděl nový film", "saw a new film"] ]],
                ["Celý rok jsme ", "The whole year, we ",[["pracovali", "worked"], ["se učili", "studied"] ]],
                ["Kamarádi ", "Friends ",[["zarezervovali hotel", "booked a hotel"], ["uvařili oběd", "cooked lunch"] ]],
                ["Doktor ", "The doctor ",[["zavolal taxi", "called a taxi"], ["vytiskl dokument", "printed a document"] ]],
                ["Ty a tvoje sestra ", "You and your sister ",[["jste jedli chleba", "ate some bread"], ["jste pili vodu", "drank some water"] ]],


                ["První den jsem ", "The first day, I ",[["plaval v moři", "swam in the sea"], ["šel do obchodu", "went to the shop"] ]],
                ["Viděla jsi ", "Did you (fem.) see ",[["ten nový film?", "that new film?"], ["moji novou knihu?", "my new book?"] ]],
                ["Učitelka ", "The teacher (fem.) ",[["přišla do třídy", "came into the classroom", ], ["pomohla mému kamarádovi", "helped my friend"] ]],
                ["Včera bylo ", "Yesterday, the weather was ",[["hezky", "nice"], ["škaredě", "bad"] ]],
                ["Můj právník ", "My lawyer ",[["četl dopis", "was reading a letter"], ["psal dopis", "was writing a letter"] ]],
                ["Můj bratr ", "My brother ",[["zaplatil opraváři", "paid the mechanic"], ["chtěl nové auto", "wanted a new car"] ]],


                ["Co jsi ", "What did you (masc.) ",[["dělal?", "do?"], ["slyšel", "hear?"] ]],
                                                                                        ],

                 [
                ["Příbuzní ", "The relatives ",[["uvaří oběd", "will cook lunch"], ["budou vařit večeři", "will cook dinner"] ]],
                ["Příští týden ", "Next week, ",[["nebudu mít čas", "I won't have time"], ["se budu učit", "I will be studying"] ]],
                ["V pondělí ", "On Monday, ",[["budeme psát test", "we are going to write a test"], ["půjdeme do kina", "we are going to the cinema"] ]],
                ["V sobotu nebude ", "On Saturday, he won't ",[["pracovat", "work"], ["prodávat ovoce", "be selling fruit"] ]],
                ["O víkendu ", "At the weekend, ",[["přijede moje teta", "my aunt will come"], ["zavolám příbuzným", "I will call relatives"] ]],


                ["V úterý ", "On Tuesday, ",[["koupíme jídlo", "we will buy some food"], ["bude nakupovat", "he will be shopping"] ]],
                ["Ty zatelefonuješ ", "You phone ",[["kamarádovi", "a friend"], ["dítěti", "a child"] ]],
                ["On přijde k ", "He will come to ",[["učiteli", "the teacher"], ["doktorovi", "the doctor"] ]],
                ["Jestli vyhrajeme, ", "If we win ",[["půjdeme do restaurace", "we will go the the restaurant"], ["budeme oslavovat", "we will be celebrating"] ]],
                ["Já zaplatím ", "I will pay ",[["opraváři", "the mechanic"], ["zubaři", "the dentist"] ]]
                ] ]



// GENERATE RANDOM NON-REPEATING ENGLISH AND CZECH SENTENCES

const assignedArray = megaArray[parseInt(lessonNumber -1)]
const arrayLength = assignedArray.length

let indexArr = [];

let zadani = [];
let reseni =[];

while(indexArr.length < arrayLength){
    let r = Math.floor(Math.random() * arrayLength);
    if(indexArr.indexOf(r) === -1){
    indexArr.push(r)
    let numberPredmet = Math.floor(Math.random() * 2);


    zadani.push(assignedArray[r][1] + assignedArray[r][2][numberPredmet][1])
    reseni.push(assignedArray[r][0] + assignedArray[r][2][numberPredmet][0])
    };
}

let initialZadani = document.getElementById("engSentence").textContent
initialZadani = zadani[0]



const czechText = document.getElementById("czAnswer")
function copyChar(character){
    czechText.value = czechText.value + character.textContent;
}




let totalMistakesCount = 0;
let percentage = 100 - (totalMistakesCount/0.27);
let mistake = 0;
let zadaniIndex = 0;

const nextStnBtn = document.getElementById("nextSentence")
const msgBox2 = document.getElementById("messageBox2")

const zadaniBoxes = document.getElementById("engSentence")
zadaniBoxes.textContent = zadani[zadaniIndex]
const messageBox = document.getElementById("messageBox")

function checkAnswer(){
    const checkButton = document.getElementById("checkCzTransl")

    if(czechText.value.toLowerCase().trim() === reseni[zadaniIndex].toLowerCase()){

            messageBox.style.opacity = "1";
            czechText.classList.add("correct")

            setTimeout(function(){
            messageBox.style.opacity = "0";
            }, 3000);

            checkButton.classList.add("disab");
            nextStnBtn.style.display = "block";

    }else{
            mistake++;
            totalMistakesCount++;

            msgBox2.classList.add("visible")

            const hintBox = document.getElementById("hint")

                if(mistake === 1){
                hintBox.textContent ="The sentence starts with:     " + reseni[zadaniIndex].slice(0, 6) + "...";
                }
                if(mistake === 2){
                hintBox.textContent ="The sentence ends with:    ..." + reseni[zadaniIndex].slice((reseni[zadaniIndex].length -6), reseni[zadaniIndex].length);
                }
                if(mistake === 3){
                hintBox.textContent ="The correct answer is : " + reseni[zadaniIndex];
                checkButton.classList.add("disab");
                nextStnBtn.style.display = "block";
                czechText.classList.add("wrong")
                }

                setTimeout(function(){
                msgBox2.classList.remove("visible")
                }, 3000);

            }

    }


function medal(){
        let medalNotific = document.querySelectorAll(".medalNotific")
        let medalIndex;

        if(percentage < 50){medalIndex = 0}
        if(percentage > 50 && percentage <= 65 ){medalIndex = 1}
        if(percentage > 65 && percentage <= 80 ){medalIndex = 2}
        if(percentage > 80){medalIndex = 3}

        medalNotific[medalIndex].style.display = "block";
        setTimeout(function(){
        medalNotific[medalIndex].style.opacity = "1";
        },200);
     }



function slideAway(){
    const questionWrapper = document.getElementById("questionWrapper");
    const checkButton = document.getElementById("checkCzTransl")

        zadaniBoxes.style.opacity = "0";
        setTimeout(function(){
        zadaniBoxes.style.opacity = "1";
        }, 1200)
        if(zadaniIndex === zadani.length -1){


                nextStnBtn.style.display = "none";
                questionWrapper.style.opacity = "0";

                medal()

        }else{

            msgBox2.classList.remove("visible")
            messageBox.style.opacity = "0";
            nextStnBtn.style.display = "none";

            setTimeout(function(){
                checkButton.classList.remove("disab");
                czechText.classList.remove("correct")
                czechText.classList.remove("wrong")
            }, 800)



            mistake = 0;
            percentage = 100 - (totalMistakesCount/0.27);

            zadaniBoxes.style.background = "#eaeafb";
            czechText.value = "";
            zadaniIndex++;


            questionWrapper.style.transform = "translateX(600px)";
            questionWrapper.style.opacity = "0";

            setTimeout(function(){
                questionWrapper.style.transform = "translateX(0px)";
            }, 500);

            setTimeout(function(){
                zadaniBoxes.textContent = zadani[zadaniIndex];
                questionWrapper.style.opacity = "1";
            }, 1200);

        }

}
